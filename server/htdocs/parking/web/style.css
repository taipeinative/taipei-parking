html, body { height: 100%; margin: 0; }
#map { height: 100%; width: 100%; }

/* 工具列 */
.toolbar {
  position: absolute; z-index: 1000; left: 12px; top: 12px;
  background: #fff; padding: 10px; border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,.15);
  font-family: system-ui, -apple-system, "Noto Sans TC", sans-serif;
  min-width: 300px;
}
.toolbar h3 { margin: 0 0 8px; font-size: 14px; }
.toolbar .btns { display:grid; grid-template-columns: repeat(4, auto); gap:6px; margin-bottom:8px; }
.toolbar button {
  border:1px solid #ddd; background:#f7f7f7; padding:6px 10px; border-radius:8px; cursor:pointer; font-size:12px;
}
.toolbar button.active { background:#111827; color:#fff; border-color:#111827; }
.subbar { display:flex; align-items:center; gap:6px; margin-bottom:8px; }
.subbar .label { font-size:12px; color:#374151; }
.subbar .seg { border:1px solid #e5e7eb; background:#fff; padding:4px 10px; border-radius:999px; }
.subbar .seg.active { background:#111827; color:#fff; border-color:#111827; }
.toggles { display:flex; gap:12px; font-size:12px; margin-bottom:8px; }
.toggles input { margin-right:6px; }
.editor { display:flex; gap:8px; }
.editor .ghost {
  background:#fff; border:1px dashed #9ca3af; color:#374151; padding:6px 10px; border-radius:8px; font-size:12px; cursor:pointer;
}
/* 啟用新增模式的按鈕外觀：深色底＋白字 */
.editor .ghost.active {
  border-color:#111827;
  background:#111827;
  color:#fff;
}

/* 新增模式：讓地圖點擊穿透所有 Leaflet 向量圖層（格網/點圖層） */
#map.adding-lots .leaflet-interactive {
  pointer-events: none;
}

/* 權重面板（可收合） */
.weights {
  position: absolute; right: 12px; bottom: 12px; z-index: 1000;
  background: #fff; padding: 0; border-radius: 12px;
  box-shadow: 0 2px 12px rgba(0,0,0,.18);
  font-family: system-ui, -apple-system, "Noto Sans TC", sans-serif;
  font-size: 12px; max-width: 480px; box-sizing: border-box;
}
.weights-header {
  display:flex; align-items:center; justify-content:space-between;
  padding: 12px 14px; cursor:pointer; user-select:none;
}
.weights-header h3 { margin:0; font-size:14px; }
.weights-header .chevron {
  width: 10px; height: 10px; border-right: 2px solid #111827; border-bottom: 2px solid #111827;
  transform: rotate(45deg); transition: transform .2s ease;
}
.weights.collapsed .weights-header .chevron { transform: rotate(-135deg); }

.weights-body { padding: 0 14px 12px; display:block; }
.weights.collapsed .weights-body { display:none; }

.supply-row {
  display:flex; align-items:center; gap:8px; margin: 2px 0 12px 0;
}
.supply-row input {
  width: 140px; padding:6px 8px; border:1px solid #e5e7eb; border-radius:8px; text-align:center; font-size:12px;
}

.wtable {
  display:grid;
  grid-template-columns: 1fr repeat(3, 100px);
  gap: 6px 8px;
  align-items:center;
}
.wtable .wh.head { font-weight:700; text-align:center; }
.wtable .wl { font-weight:600; }
.wtable input {
  width:100%; padding:6px 8px; border:1px solid #e5e7eb; border-radius:8px; text-align:center; font-size:12px; box-sizing:border-box;
}

.actions { margin-top:10px; display:flex; gap:8px; }
.actions button { flex:1; padding:8px 10px; border-radius:8px; border:1px solid #e5e7eb; background:#f9fafb; cursor:pointer; }
.actions .primary { border-color:#111827; background:#111827; color:#fff; }
.hint { display:block; margin-top:6px; color:#6b7280; }

.legend {
  background:#fff; padding:8px 10px; line-height:1.3; border-radius:10px;
  box-shadow:0 2px 10px rgba(0,0,0,.15); font-size:12px;
  font-family: system-ui, -apple-system, "Noto Sans TC", sans-serif;
}
.legend .title { font-weight:700; margin-bottom:4px; }
.legend i { width:12px; height:12px; display:inline-block; margin-right:6px; border-radius:2px; vertical-align:-2px; }

@media (max-width: 720px) {
  .wtable { grid-template-columns: 1fr repeat(3, 78px); }
}
